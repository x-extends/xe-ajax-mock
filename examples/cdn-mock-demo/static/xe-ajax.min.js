/*!
 * xe-ajax.js v3.0.11
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.XEAjax=a())}(this,function(){var C=Array.isArray||function(af){return af?af.constructor===Array:false};function v(af){return typeof FormData!=="undefined"&&af instanceof FormData}function z(af){if(/(\w+:)\/{2}((.*?)\/|(.*)$)/.test(af.url)){if(RegExp.$1!==location.protocol||RegExp.$2.split("/")[0]!==location.host){return true}}return false}function P(af){return af&&typeof af==="object"}function u(af){return typeof af==="function"}function t(){var af=location.pathname;var ag=K(af,"/")+1;return location.origin+(ag===af.length?af:af.substring(0,ag))}function K(ah,ag){if(u(ah.lastIndexOf)){return ah.lastIndexOf(ag)}else{for(var af=ah.length-1;af>=0;af--){if(ag===ah[af]){return af}}}return -1}function L(ah,ai,ag){for(var af in ah){if(ah.hasOwnProperty(af)){ai.call(ag,ah[af],af,ah)}}}function V(ag,ai,ah){var af=[];L(ag,function(ak,aj){if(P(ak)){af=af.concat(V(ak,ai+"["+aj+"]",C(ak)))}else{af.push(encodeURIComponent(ai+"["+(ah?"":aj)+"]")+"="+encodeURIComponent(ak))}});return af}function g(af){var ag=[];L(af,function(ai,ah){if(ai!==undefined){if(P(ai)){ag=ag.concat(V(ai,ah,C(ai)))}else{ag.push(encodeURIComponent(ah)+"="+encodeURIComponent(ai))}}});return ag.join("&").replace(/%20/g,"+")}var d=Object.assign||function(aj){for(var ai,ag=1,af=arguments.length;ag<af;ag++){ai=arguments[ag];for(var ah in ai){if(ai.hasOwnProperty(ah)){aj[ah]=ai[ah]}}}return aj};function k(aj,ai,ah){if(aj.forEach){aj.forEach(ai,ah)}else{for(var ag=0,af=aj.length||0;ag<af;ag++){ai.call(ah||b,aj[ag],ag,aj)}}}function Z(af){return String(af).toLowerCase()}function H(){this._state={};this.set=function(af,ag){this._state[Z(af)]=[ag]};this.get=function(af){var ag=Z(af);return this.has(ag)?this._state[ag].join(", "):null};this.append=function(af,ah){var ag=Z(af);if(this.has(ag)){return this._state[ag].push(ah)}else{this.set(ag,ah)}};this.has=function(af){return !!this._state[Z(af)]};this["delete"]=function(af){delete this._state[Z(af)]}}d(H.prototype,{forEach:function(ag,af){L(this._state,function(aj,ah,ai){ag.call(af,aj.join(", "),ai)})}});var m=[];function F(ah){for(var ag=0,af=m.length;ag<af;ag++){if(ah===m[ag][0]){return ag}}}function E(ag){if(ag.signal){var af=F(ag.signal);if(af===undefined){m.push([ag.signal,[ag]])}else{m[af][1].push(ag)}}}function M(){}function B(){this.signal=new M()}d(B.prototype,{abort:function(){var af=F(this.signal);if(af!==undefined){k(m[af][1],function(ag){setTimeout(function(){ag.abort()})});m.splice(af,1)}}});const ae={request:[],response:[]};function N(af){return function(ag){if(af.indexOf(ag)===-1){af.push(ag)}}}function a(af){try{var ag=JSON.stringify(af.body)}catch(ah){ag=""}this.status=af.status;this.responseHeaders=af.headers;this.response=ag;this.responseText=ag}d(a.prototype,{getAllResponseHeaders:function(){var af="";var ah=this.responseHeaders;if(ah){for(var ag in ah){if(ah.hasOwnProperty(ag)){af+=ag+": "+ah[ag]+"\n"}}}return af}});function y(af){var ag=Promise.resolve(af);k(ae.request,function(ah){ag=ag.then(function(ai){return new Promise(function(aj){ah(ai,function(){aj(ai)})})}).catch(function(ai){console.error(ai)})});return ag}function w(af,ag){var ah=Promise.resolve(ag);k(ae.response,function(ai){ah=ah.then(function(aj){return new Promise(function(ak){ai(aj,function(al){if(al&&al.constructor!==Q){ak(new Q(af,new a(al)))}else{ak(aj)}})})}).catch(function(aj){console.error(aj)})});return ah}var O={request:{use:N(ae.request)},response:{use:N(ae.response)}};O.request.use(function(ag,af){if(!v(ag.method==="GET"?ag.params:ag.body)){if(ag.method!=="GET"&&String(ag.bodyType).toLocaleUpperCase()==="JSON_DATA"){ag.setHeader("Content-Type","application/json; charset=utf-8")}else{ag.setHeader("Content-Type","application/x-www-form-urlencoded")}}if(ag.crossOrigin){ag.setHeader("X-Requested-With","XMLHttpRequest")}af()});function ac(af){d(this,{url:"",body:null,params:null,signal:null},af);this.ABORT_RESPONSE=undefined;this.method=String(this.method).toLocaleUpperCase();this.crossOrigin=z(this);if(af&&af.jsonp){this.script=document.createElement("script")}else{this.xhr=af.getXMLHttpRequest(this)}E(this)}d(ac.prototype,{abort:function(af){this.xhr.abort(af)},setHeader:function(af,ag){this.headers[af]=ag},getHeader:function(){return this.headers[name]},deleteHeader:function(af){delete this.headers[af]},clearHeader:function(){this.headers={}},getUrl:function(){var af=this.url;var ag="";if(af){if(u(this.transformParams)){this.params=this.transformParams(this.params||{},this)}if(this.params&&!v(this.params)){ag=u(this.paramsSerializer)?this.paramsSerializer(this.params,this):g(this.params)}if(ag){af+=(af.indexOf("?")===-1?"?":"&")+ag}if(/\w+:\/{2}.*/.test(af)){return af}return this.baseURL.replace(/\/$/,"")+"/"+af.replace(/^\//,"")}return af},getBody:function(){var af=this;return new Promise(function(ai,ah){var ag=null;
if(af.body&&af.method!=="GET"){try{if(u(af.transformBody)){af.body=af.transformBody(af.body||{},af)||af.body}if(u(af.stringifyBody)){ag=af.stringifyBody(af.body,af)||null}else{if(v(af.body)){ag=af.body}else{if(String(af.bodyType).toLocaleUpperCase()==="FORM_DATA"){ag=g(af.body)}else{ag=JSON.stringify(af.body)}}}}catch(aj){console.error(aj)}}ai(ag)})}});function p(af){this.locked=false;this._xhr=af}d(p.prototype,{_getBody:function(){var af=this;var ag=this._xhr;return new Promise(function(aj,ai){var ah={responseText:"",response:ag};if(ag&&ag.response!==undefined&&ag.status!==undefined){if(ag.responseText){ah.responseText=ag.responseText;try{ah.response=JSON.parse(ag.responseText)}catch(ak){ah.response=null}}else{ah.response=ag.response;ah.responseText=JSON.stringify(ag.response)}}else{ah.responseText=JSON.stringify(ah.response)}if(af.locked){ai(new TypeError("body stream already read"))}else{af.locked=true;aj(ah)}})}});function Q(ag,ai){var af=this;this.body=new p(ai);this.bodyUsed=false;this.url=ag.url;this.headers=new H();this.status=0;this.statusText="";this.ok=false;this.redirected=false;this.type="basic";this.json=function(){return this.body._getBody().then(function(aj){af.bodyUsed=true;return aj.response})};this.text=function(){return this.body._getBody().then(function(aj){af.bodyUsed=true;return aj.responseText})};if(ai&&ai.response!==undefined&&ai.status!==undefined){this.status=ai.status;this.redirected=this.status===302;this.ok=ag.getPromiseStatus(this);if(this.status===1223||this.status===204){this.statusText="No Content"}else{if(this.status===304){this.statusText="Not Modified"}else{this.statusText=(ai.statusText||this.statusText).trim()}}if(ai.getAllResponseHeaders){var ah=ai.getAllResponseHeaders().trim();if(ah){k(ah.split("\n"),function(ak){var aj=ak.indexOf(":");this.headers.set(ak.slice(0,aj).trim(),ak.slice(aj+1).trim())},this)}}}}var b=typeof window==="undefined"?this:window;var U={method:"GET",baseURL:t(),async:true,credentials:"same-origin",bodyType:"JSON_DATA",headers:{Accept:"application/json, text/plain, */*;"},getXMLHttpRequest:function(){return new XMLHttpRequest()},getPromiseStatus:function(af){return af.status>=200&&af.status<300}};function c(af){return new Promise(function(ah,ag){return(af&&af.jsonp?j:S)(new ac(d({},U,{headers:d({},U.headers)},af)),ah,ag)})}function A(af,ai,ah,ag){w(af,new Q(af,ai)).then(function(aj){ah(aj)})}function S(af,ah,ag){var ai=af.xhr;y(af).then(function(){ai.open(af.method,af.getUrl(),af.async!==false);if(af.timeout&&!isNaN(af.timeout)){ai.timeout=af.timeout}L(af.headers,function(ak,aj){ai.setRequestHeader(aj,ak)});ai.onreadystatechange=function(){if(ai.readyState===4){A(af,ai,ah,ag)}};if(af.credentials==="include"){ai.withCredentials=true}else{if(af.credentials==="omit"){ai.withCredentials=false}}af.getBody().then(function(aj){ai.send(aj)}).catch(function(){ai.send()})})}var i=0;function j(ah,aj,ai){var af=ah.script;var ag=ah.getUrl();if(!ah.jsonpCallback){ah.jsonpCallback="_xeajax_jsonp"+(++i)}b[ah.jsonpCallback]=function(ak){n(ah,{status:200,response:ak},aj,ai)};af.type="text/javascript";af.src=ag+(ag.indexOf("?")===-1?"?":"&")+ah.jsonp+"="+ah.jsonpCallback;af.onerror=function(ak){n(ah,{status:500,response:null},aj,ai)};if(u(ah.sendJSONP)){ah.sendJSONP(af,ah,aj,ai)}else{document.body.appendChild(af)}}function n(ag,aj,ai,ah){var af=new Q(ag,aj);delete b[ag.jsonpCallback];if(u(ag.sendEndJSONP)){ag.sendEndJSONP(ag.script,ag)}else{document.body.removeChild(ag.script)}af.json().then(function(ak){(af.ok?ai:ah)(ak)}).catch(function(ak){ah(ak)})}var l=function l(af){d(U,af)};function ad(ah,ag,af){return c(d({method:ah},ag,af))}function ab(af){return function(){return af.apply(this,arguments).then(function(ag){return new Promise(function(ai,ah){ag.json().then(function(aj){(ag.ok?ai:ah)(aj)}).catch(function(aj){ah(aj)})})})}}var I=c;function q(af){return Promise.all(af.map(function(ag){if(ag instanceof Promise){return ag}else{if(ag&&P(ag)){return I(ag)}}return ag}))}function s(af,ah,ag){return ad("GET",P(af)?{}:{url:af,params:ah},ag)}function D(ag,af,ah){return ad("POST",P(ag)?{}:{url:ag,body:af},ah)}function e(ag,af,ah){return ad("PUT",P(ag)?{}:{url:ag,body:af},ah)}function r(ag,af,ah){return ad("PATCH",P(ag)?{}:{url:ag,body:af},ah)}function h(ag,af,ah){return ad("DELETE",P(ag)?{}:{url:ag,body:af},ah)}function o(af,ah,ag){return ad("GET",{url:af,params:ah,jsonp:"callback"},ag)}var R=ab(s);var T=ab(D);var f=ab(e);var x=ab(r);var X=ab(h);var G=B;var Y="3.0.11";var J={doAll:q,fetchGet:s,getJSON:R,fetchPost:D,postJSON:T,fetchPut:e,putJSON:f,fetchPatch:r,patchJSON:x,fetchDelete:h,deleteJSON:X,jsonp:o,setup:l,serialize:g,interceptors:O,AjaxController:G,version:Y};function aa(af){return d(c,af)}function W(af){af.install(c)}aa(J);c.use=W;c.mixin=aa;return c}));