/*!
 * xe-ajax.js v3.0.10
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.XEAjax=a())}(this,function(){var B=Array.isArray||function(ad){return ad?ad.constructor===Array:false};function u(ad){return typeof FormData!=="undefined"&&ad instanceof FormData}function y(ad){if(/(\w+:)\/{2}((.*?)\/|(.*)$)/.test(ad.url)){if(RegExp.$1!==location.protocol||RegExp.$2.split("/")[0]!==location.host){return true}}return false}function N(ad){return ad&&typeof ad==="object"}function t(ad){return typeof ad==="function"}function J(af,ag,ae){for(var ad in af){if(af.hasOwnProperty(ad)){ag.call(ae,af[ad],ad,af)}}}function T(ae,ag,af){var ad=[];J(ae,function(ai,ah){if(N(ai)){ad=ad.concat(T(ai,ag+"["+ah+"]",B(ai)))}else{ad.push(encodeURIComponent(ag+"["+(af?"":ah)+"]")+"="+encodeURIComponent(ai))}});return ad}function g(ad){var ae=[];J(ad,function(ag,af){if(ag!==undefined){if(N(ag)){ae=ae.concat(T(ag,af,B(ag)))}else{ae.push(encodeURIComponent(af)+"="+encodeURIComponent(ag))}}});return ae.join("&").replace(/%20/g,"+")}var d=Object.assign||function(ah){for(var ag,ae=1,ad=arguments.length;ae<ad;ae++){ag=arguments[ae];for(var af in ag){if(ag.hasOwnProperty(af)){ah[af]=ag[af]}}}return ah};function k(ah,ag,af){if(ah.forEach){ah.forEach(ag,af)}else{for(var ae=0,ad=ah.length||0;ae<ad;ae++){ag.call(af||b,ah[ae],ae,ah)}}}function X(ad){return String(ad).toLowerCase()}function G(){this._state={};this.set=function(ad,ae){this._state[X(ad)]=[ae]};this.get=function(ad){var ae=X(ad);return this.has(ae)?this._state[ae].join(", "):null};this.append=function(ad,af){var ae=X(ad);if(this.has(ae)){return this._state[ae].push(af)}else{this.set(ae,af)}};this.has=function(ad){return !!this._state[X(ad)]};this["delete"]=function(ad){delete this._state[X(ad)]}}d(G.prototype,{forEach:function(ae,ad){J(this._state,function(ah,af,ag){ae.call(ad,ah.join(", "),ag)})}});var m=[];function E(af){for(var ae=0,ad=m.length;ae<ad;ae++){if(af===m[ae][0]){return ae}}}function D(ae){if(ae.signal){var ad=E(ae.signal);if(ad===undefined){m.push([ae.signal,[ae]])}else{m[ad][1].push(ae)}}}function K(){}function A(){this.signal=new K()}d(A.prototype,{abort:function(){var ad=E(this.signal);if(ad!==undefined){k(m[ad][1],function(ae){setTimeout(function(){ae.abort()})});m.splice(ad,1)}}});const ac={request:[],response:[]};function L(ad){return function(ae){if(ad.indexOf(ae)===-1){ad.push(ae)}}}function a(ad){try{var ae=JSON.stringify(ad.body)}catch(af){ae=""}this.status=ad.status;this.responseHeaders=ad.headers;this.response=ae;this.responseText=ae}d(a.prototype,{getAllResponseHeaders:function(){var ad="";var af=this.responseHeaders;if(af){for(var ae in af){if(af.hasOwnProperty(ae)){ad+=ae+": "+af[ae]+"\n"}}}return ad}});function x(ad){var ae=Promise.resolve(ad);k(ac.request,function(af){ae=ae.then(function(ag){return new Promise(function(ah){af(ag,function(){ah(ag)})})}).catch(function(ag){console.error(ag)})});return ae}function v(ad,ae){var af=Promise.resolve(ae);k(ac.response,function(ag){af=af.then(function(ah){return new Promise(function(ai){ag(ah,function(aj){if(aj&&aj.constructor!==O){ai(new O(ad,new a(aj)))}else{ai(ah)}})})}).catch(function(ah){console.error(ah)})});return af}var M={request:{use:L(ac.request)},response:{use:L(ac.response)}};M.request.use(function(ae,ad){if(!u(ae.method==="GET"?ae.params:ae.body)){if(ae.method!=="GET"&&String(ae.bodyType).toLocaleUpperCase()==="JSON_DATA"){ae.setHeader("Content-Type","application/json; charset=utf-8")}else{ae.setHeader("Content-Type","application/x-www-form-urlencoded")}}if(ae.crossOrigin){ae.setHeader("X-Requested-With","XMLHttpRequest")}ad()});function aa(ad){d(this,{url:"",body:null,params:null,signal:null},ad);this.ABORT_RESPONSE=undefined;this.method=String(this.method).toLocaleUpperCase();this.crossOrigin=y(this);if(ad&&ad.jsonp){this.script=document.createElement("script")}else{this.xhr=ad.getXMLHttpRequest(this)}D(this)}d(aa.prototype,{abort:function(ad){this.xhr.abort(ad)},setHeader:function(ad,ae){this.headers[ad]=ae},getHeader:function(){return this.headers[name]},deleteHeader:function(ad){delete this.headers[ad]},clearHeader:function(){this.headers={}},getUrl:function(){var ad=this.url;var ae="";if(ad){if(t(this.transformParams)){this.params=this.transformParams(this.params||{},this)}if(this.params&&!u(this.params)){ae=t(this.paramsSerializer)?this.paramsSerializer(this.params,this):g(this.params)}if(ae){ad+=(ad.indexOf("?")===-1?"?":"&")+ae}if(/\w+:\/{2}.*/.test(ad)){return ad}return this.baseURL.replace(/\/$/,"")+"/"+ad.replace(/^\//,"")}return ad},getBody:function(){var ad=this;return new Promise(function(ag,af){var ae=null;if(ad.body&&ad.method!=="GET"){try{if(t(ad.transformBody)){ad.body=ad.transformBody(ad.body||{},ad)||ad.body}if(t(ad.stringifyBody)){ae=ad.stringifyBody(ad.body,ad)||null}else{if(u(ad.body)){ae=ad.body}else{if(String(ad.bodyType).toLocaleUpperCase()==="FORM_DATA"){ae=g(ad.body)
}else{ae=JSON.stringify(ad.body)}}}}catch(ah){console.error(ah)}}ag(ae)})}});function p(ad){this.locked=false;this._xhr=ad}d(p.prototype,{_getBody:function(){var ad=this;var ae=this._xhr;return new Promise(function(ah,ag){var af={responseText:"",response:ae};if(ae&&ae.response!==undefined&&ae.status!==undefined){if(ae.responseText){af.responseText=ae.responseText;try{af.response=JSON.parse(ae.responseText)}catch(ai){af.response=null}}else{af.response=ae.response;af.responseText=JSON.stringify(ae.response)}}else{af.responseText=JSON.stringify(af.response)}if(ad.locked){ag(new TypeError("body stream already read"))}else{ad.locked=true;ah(af)}})}});function O(ae,ag){var ad=this;this.body=new p(ag);this.bodyUsed=false;this.url=ae.url;this.headers=new G();this.status=0;this.statusText="";this.ok=false;this.redirected=false;this.type="basic";this.json=function(){return this.body._getBody().then(function(ah){ad.bodyUsed=true;return ah.response})};this.text=function(){return this.body._getBody().then(function(ah){ad.bodyUsed=true;return ah.responseText})};if(ag&&ag.response!==undefined&&ag.status!==undefined){this.status=ag.status;this.redirected=this.status===302;this.ok=ae.getPromiseStatus(this);if(this.status===1223||this.status===204){this.statusText="No Content"}else{if(this.status===304){this.statusText="Not Modified"}else{this.statusText=(ag.statusText||this.statusText).trim()}}if(ag.getAllResponseHeaders){var af=ag.getAllResponseHeaders().trim();if(af){k(af.split("\n"),function(ai){var ah=ai.indexOf(":");this.headers.set(ai.slice(0,ah).trim(),ai.slice(ah+1).trim())},this)}}}}var b=typeof window==="undefined"?this:window;var S={method:"GET",baseURL:location.origin,async:true,credentials:"same-origin",bodyType:"JSON_DATA",headers:{Accept:"application/json, text/plain, */*;"},getXMLHttpRequest:function(){return new XMLHttpRequest()},getPromiseStatus:function(ad){return ad.status>=200&&ad.status<300}};function c(ad){return new Promise(function(af,ae){return(ad&&ad.jsonp?j:Q)(new aa(d({},S,{headers:d({},S.headers)},ad)),af,ae)})}function z(ad,ag,af,ae){v(ad,new O(ad,ag)).then(function(ah){af(ah)})}function Q(ad,af,ae){var ag=ad.xhr;x(ad).then(function(){ag.open(ad.method,ad.getUrl(),ad.async!==false);if(ad.timeout&&!isNaN(ad.timeout)){ag.timeout=ad.timeout}J(ad.headers,function(ai,ah){ag.setRequestHeader(ah,ai)});ag.onreadystatechange=function(){if(ag.readyState===4){z(ad,ag,af,ae)}};if(ad.credentials==="include"){ag.withCredentials=true}else{if(ad.credentials==="omit"){ag.withCredentials=false}}ad.getBody().then(function(ah){ag.send(ah)}).catch(function(){ag.send()})})}var i=0;function j(af,ah,ag){var ad=af.script;var ae=af.getUrl();if(!af.jsonpCallback){af.jsonpCallback="_xeajax_jsonp"+(++i)}b[af.jsonpCallback]=function(ai){n(af,{status:200,response:ai},ah,ag)};ad.type="text/javascript";ad.src=ae+(ae.indexOf("?")===-1?"?":"&")+af.jsonp+"="+af.jsonpCallback;ad.onerror=function(ai){n(af,{status:500,response:null},ah,ag)};if(t(af.sendJSONP)){af.sendJSONP(ad,af,ah,ag)}else{document.body.appendChild(ad)}}function n(ae,ah,ag,af){var ad=new O(ae,ah);delete b[ae.jsonpCallback];if(t(ae.sendEndJSONP)){ae.sendEndJSONP(ae.script,ae)}else{document.body.removeChild(ae.script)}ad.json().then(function(ai){(ad.ok?ag:af)(ai)}).catch(function(ai){af(ai)})}var l=function l(ad){d(S,ad)};function ab(af,ae,ad){return c(d({method:af},ae,ad))}function Z(ad){return function(){return ad.apply(this,arguments).then(function(ae){return new Promise(function(ag,af){ae.json().then(function(ah){(ae.ok?ag:af)(ah)}).catch(function(ah){af(ah)})})})}}var H=c;function q(ad){return Promise.all(ad.map(function(ae){if(ae instanceof Promise){return ae}else{if(ae&&N(ae)){return H(ae)}}return ae}))}function s(ad,af,ae){return ab("GET",N(ad)?{}:{url:ad,params:af},ae)}function C(ae,ad,af){return ab("POST",N(ae)?{}:{url:ae,body:ad},af)}function e(ae,ad,af){return ab("PUT",N(ae)?{}:{url:ae,body:ad},af)}function r(ae,ad,af){return ab("PATCH",N(ae)?{}:{url:ae,body:ad},af)}function h(ae,ad,af){return ab("DELETE",N(ae)?{}:{url:ae,body:ad},af)}function o(ad,af,ae){return ab("GET",{url:ad,params:af,jsonp:"callback"},ae)}var P=Z(s);var R=Z(C);var f=Z(e);var w=Z(r);var V=Z(h);var F=A;var W="3.0.10";var I={doAll:q,fetchGet:s,getJSON:P,fetchPost:C,postJSON:R,fetchPut:e,putJSON:f,fetchPatch:r,patchJSON:w,fetchDelete:h,deleteJSON:V,jsonp:o,setup:l,serialize:g,interceptors:M,AjaxController:F,version:W};function Y(ad){return d(c,ad)}function U(ad){ad.install(c)}Y(I);c.use=U;c.mixin=Y;return c}));