/*!
 * xe-ajax-mock.js v1.5.7
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.XEAjaxMock=a())}(this,function(){var J=Array.isArray||function(ah){return ah?ah.constructor===Array:false};function I(ah){return ah?ah.constructor===Date:false}function W(ah){return typeof ah==="object"}function B(ah){return typeof ah==="function"}function t(ah){return typeof ah==="string"}function f(ai,ah){return ai>=ah?ai:((ai=ai||0)+Math.round(Math.random()*((ah||9)-ai)))}function S(aj,ai){if(aj){if(I(aj)){return aj}if(!isNaN(aj)){return new Date(aj)}if(t(aj)){ai=ai||"yyyy-MM-dd HH:mm:ss.SSS";var ah=[];q([{rules:[["yyyy",4],["yyy",3],["yy",2]]},{rules:[["MM",2],["M",1]],offset:-1},{rules:[["dd",2],["d",1]]},{rules:[["HH",2],["H",1]]},{rules:[["mm",2],["m",1]]},{rules:[["ss",2],["s",1]]},{rules:[["SSS",3],["SS",2],["S",1]]}],function(ao){for(var al,an,am=0,ap=ao.rules,ak=ap.length;am<ak;am++){al=ap[am];an=ai.indexOf(al[0]);if(an>-1){ah.push(parseFloat(aj.substring(an,an+al[1])||0)+(ao.offset||0));break}else{if(am===ak-1){ah.push(0)}}}});return new Date(ah[0],ah[1],ah[2],ah[3],ah[4],ah[5],ah[6])}}return"Invalid Date"}function af(aj,al){aj=S(aj);if(I(aj)){var ai=al||"yyyy-MM-dd HH:mm:ss";var ak=["日","一","二","三","四","五","六"];var ah={"q+":Math.floor((aj.getMonth()+3)/3),"M+":aj.getMonth()+1,"E+":aj.getDay(),"d+":aj.getDate(),"H+":aj.getHours(),"m+":aj.getMinutes(),"s+":aj.getSeconds(),"S":aj.getMilliseconds()};if(/(y+)/.test(ai)){ai=ai.replace(RegExp.$1,(""+aj.getFullYear()).substr(4-RegExp.$1.length))}q(j(ah),function(am){if(new RegExp("("+am+")").test(ai)){var an=""+ah[am];ai=ai.replace(RegExp.$1,(am==="q+"||am==="E+")?ak[an]:(RegExp.$1.length===1?an:("00"+an).substr(an.length)))}});return ai}return aj}var d=Object.assign||function(al){for(var ak,ai=1,ah=arguments.length;ai<ah;ai++){ak=arguments[ai];for(var aj in ak){if(ak.hasOwnProperty(aj)){al[aj]=ak[aj]}}}return al};function q(al,ak,aj){if(al.forEach){return al.forEach(ak,aj)}for(var ai=0,ah=al.length||0;ai<ah;ai++){ak.call(aj||b,al[ai],ai,al)}}function G(aj,ak,ai){for(var ah in aj){if(aj.hasOwnProperty(ah)){ak.call(ai||this,aj[ah],ah,aj)}}}function j(ai){var ah=[];if(ai){if(Object.keys){return Object.keys(ai)}G(ai,function(ak,aj){ah.push(aj)})}return ah}function o(ai){if(Object.values){return ai?Object.values(ai):[]}var ah=[];q(j(ai),function(aj){ah.push(ai[aj])});return ah}function p(al){var ai=[];for(var ak=o(al),ah=ak.length-1;ah>=0;ah--){var aj=ah>0?f(0,ah):0;ai.push(ak[aj]);ak.splice(aj,1)}return ai}function v(aj,ai){var ah=p(aj);if(arguments.length===1){return ah[0]}if(ai<ah.length){ah.length=ai||0}return ah}function e(){return location.origin||(location.protocol+"//"+location.host)}function z(){var ah=location.pathname;var ai=T(ah,"/")+1;return e()+(ai===ah.length?ah:ah.substring(0,ai))}function T(aj,ai){if(B(aj.lastIndexOf)){return aj.lastIndexOf(ai)}else{for(var ah=aj.length-1;ah>=0;ah--){if(ai===aj[ah]){return ah}}}return -1}function ag(ah){var ai=String(ah).match(/(\d+)-(\d+)/);return ai&&ai.length===3?f(parseInt(ai[1]),parseInt(ai[2])):(isNaN(ah)?0:Number(ah))}var h=/(.+)\|(array|random)\(([0-9-]+)\)$/;function y(ai){var ah=null;ah=D(ai,new c());if(W(ah)){var aj=j(ah);if(aj.length===1&&aj[0]==="!return"){ah=ah[aj[0]]}}return ah}function D(ai,ah){if(ai){if(J(ai)){return Y(ai,ah)}if(W(ai)){return l(ai,ah)}if(t(ai)){return s(ai,ah)}}return ai}function Y(aj,ai){var ah=[];q(aj,function(am,al){var ak=new c(ai,aj,am,al);ah.push(D(am,ak))});return ah}function l(aj,ai){var ah={};G(aj,function(aq,ao){var an=ao.match(h);var ap=null;if(an&&an.length===4){ao=an[1];var am=an[2].toLowerCase()==="random";if(an[2].toLowerCase()==="array"||am){var ak=ag(an[3]);if(J(aq)){if(aq.length>ak){ap=Y(am?v(aq,ak):aq.slice(0,ak));if(am&&ap.length===1){ap=ap[0]}}else{ap=aq}}else{ap=[];for(var al=0;al<ak;al++){var ar=new c(ai,ap,null,al);ap.push(D(aq,ar))}}}}else{ap=D(aq,ai);an=ao.match(/(.+)\|(number|boolean)$/);if(an&&an.length===3){ao=an[1];if(an[2].toLowerCase()==="number"){ap=parseFloat(ap)}else{if(an[2].toLowerCase()==="boolean"){ap=ap==="0"?false:Boolean(ap)}}}}ah[ao]=ap});return ah}function c(ai,ak,aj,ah){this.$parent=ai;this.$obj=ak;this.$value=aj;this.$index=ah}function ac(ah){return d(c.prototype,ah)}var i={random:{num:f,time:function(ah,ai){return f(S(ah).getTime(),S(ai).getTime())},date:function(ah,aj,ai){return af(i.random.time(ah,aj),ai)},repeat:function(ak,aj,ai){aj=aj||1;ai=ai||aj;if(t(ak)){ak=ak.split("")}if(ak.length<ai){var ah=ak;while(ah.length<ai){ah=ah.concat(ak)}ah.length=ai;ak=ah}return v(ak,f(aj,ai)).join("")}}};y.mixin=ac;ac(i);var a={tStart:"__restArr=[]",tEnd:"return __restArr.join('');",contStart:"__restArr.push('",contEnd:"');\n",contTrimEnd:"'.trim());\n",cStart:"__restArr.push(",cEnd:");\n",simplifyRegExp:/__restArr\.push\('\s*'\);/g};function K(ah){return a.contEnd+ah+a.contStart}function s(ah,ai){var ak=ah.replace(/[\r\n\t]/g," ").replace(/{{\s*(.*?)\s*}}/g,function(am,al){return K(a.cStart+al+a.cEnd)
});try{ak="var "+a.tStart+";with(opts){"+a.contStart+ak+a.contEnd+"};"+a.tEnd;return new Function("opts",ak.replace(a.simplifyRegExp,""))(ai)}catch(aj){console.error(aj)}return ah}var b=typeof window==="undefined"?this:window;var O={};var N=[];var Z={baseURL:z(),template:false,timeout:"20-400",headers:null,error:true,log:true};function x(ah,aj){ah.body=null;try{ah.body=JSON.parse(O[aj])}catch(ai){ah.body=O[aj]}return ah}function U(ai){var ah=this;return new Promise(function(ak,aj){if(ai.indexOf("/")===0){ai=e()+ai}else{if(!/\w+:\/{2}.*/.test(ai)){ai=Z.baseURL.replace(/\/$/,"")+"/"+ai}}if(O[ai]){ak(x(ah,ai))}else{var al=new XMLHttpRequest();al.open("GET",ai,true);al.onreadystatechange=function(){if(al.readyState===4){if(al.status<200&&al.status>=300){if(Z.error){console.error("This relative module was not found: "+ai)}}O[ai]=al.responseText;ak(x(ah,ai))}};al.send()}})}function w(ai,aj,ah){if(aj&&aj.body!==undefined&&aj.status!==undefined){aj.headers=d({},Z.headers,aj.headers);d(this,aj)}else{this.status=ah;this.body=aj;this.headers=d({},Z.headers)}}d(w.prototype,{require:U});function C(ah,ai){return new Promise(function(ak,aj){ah.asyncTimeout=setTimeout(function(){if(B(ah.response)){return ak(ah.response(ai,new w(ah,null,200),ah))}return Promise.resolve(ah.response).then(function(al){ak(new w(ah,al,200))}).catch(function(al){aj(new w(ah,al,500))})},ah.time)})}function n(aj,ak,ah,ai){if(aj&&ak){this.path=aj;this.method=ak;this.time=0;this.response=ah;this.options=ai;this.asyncTimeout=null}else{throw new TypeError("path and method cannot be empty")}}d(n.prototype,{send:function(ai,aj){var ah=this;this.time=aj.timeout||ag(this.options.timeout);return C(ah,aj).then(function(ak){ah.reply(ai,aj,ak)})},reply:function(aj,ak,ah){if(aj.readyState!==4){var ai=ak.getUrl();if(this.options.template===true){ah.body=m(ah.body)}aj.status=ah.status;aj.responseText=aj.response=ah.body?JSON.stringify(ah.body):"";aj.responseHeaders=ah.headers;aj.readyState=4;if(this.options.error&&!ak.getPromiseStatus(aj)){console.error(ak.method+" "+ai+" "+aj.status)}if(B(aj.onreadystatechange)){aj.onreadystatechange()}if(this.options.log){console.info("[XEAjaxMock] URL: "+ai+"\nMethod: "+ak.method+" => Status: "+(ah?ah.status:"canceled")+" => Time: "+this.time+"ms");console.info(ah)}}}});function X(ai){var ah=(ai.getUrl()||"").split(/\?|#/)[0];return N.find(function(ak){if((ak.jsonp?(ak.jsonp===ai.jsonp):true)&&ai.method.toLowerCase()===ak.method.toLowerCase()){var aj=false;var al=[];var am=ah.match(new RegExp(ak.path.replace(/{[^{}]+}/g,function(an){al.push(an.substring(1,an.length-1));return"([^/]+)"})+"(/.*)?"));ak.pathVariable={};aj=am&&am.length===al.length+2&&!am[am.length-1];if(aj&&al.length){q(al,function(ao,an){ak.pathVariable[ao]=am[an+1]})}return aj}})}function Q(aj,ah,ai,ak){if(J(aj)){q(aj,function(al){if(al.path){if(ak&&al.path.indexOf("/")===0){al.path=e()+al.path}else{if(ak&&/\w+:\/{2}.*/.test(al.path)){al.path=al.path}else{al.path=ai.replace(/\/$/,"")+"/"+al.path.replace(/^\//,"")}}if(al.response){al.method=String(al.method||"GET");N.push(new n(al.path,al.method,al.response,ah))}Q(al.children,ah,al.path)}})}}function P(ah){this._mock=null;this._xhr=null;this._request=ah}d(P.prototype,{timeout:0,status:0,readyState:0,responseHeaders:null,ontimeout:null,onreadystatechange:null,withCredentials:false,response:"",responseText:"",open:function(aj,ah,ai){this._mock=X(this._request);if(this._mock){this.readyState=1;if(B(this.onreadystatechange)){this.onreadystatechange()}}else{this._xhr=new XMLHttpRequest();this._xhr.open(aj,ah,ai)}},send:function(ah){if(this._mock){this._mock.send(this,this._request)}else{var aj=this._xhr;var ai=this;if(this.ontimeout){aj.ontimeout=this.ontimeout}aj.withCredentials=this.withCredentials;aj.onreadystatechange=function(){ai.status=aj.status;ai.readyState=aj.readyState;ai.response=aj.response;ai.responseText=aj.responseText;aj.getAllResponseHeaders().trim();if(B(ai.onreadystatechange)){ai.onreadystatechange()}};aj.send(ah)}},abort:function(ah){var ai=this;setTimeout(function(){if(ai._mock){if(ai.readyState!==0){clearTimeout(ai._mock.asyncTimeout);ai._mock.reply(ai,ai._request,ah||{status:0,response:""});ai.readyState=0}}else{ai._xhr.abort()}})},setRequestHeader:function(ah,ai){if(this._xhr){this._xhr.setRequestHeader(ah,ai)}},getAllResponseHeaders:function(){if(this._xhr){return this._xhr.getAllResponseHeaders()}var ah="";var aj=this.responseHeaders;if(aj){for(var ai in aj){if(aj.hasOwnProperty(ai)){ah+=ai+": "+aj[ai]+"\n"}}}return ah}});function g(ai,aj){var ah=X(aj);if(ah){ah.time=aj.timeout||ag(ah.options.timeout);return C(ah,aj).then(function(ak){var al=aj.getUrl();if(aj.getPromiseStatus(ak)){if(ah.options.template===true){ak.body=m(ak.body)}b[aj.jsonpCallback](ak.body);if(ah.options.log){console.info("[XEAjaxMock] URL: "+al+"\nMethod: "+aj.method+" => Status: "+(ak?ak.status:"canceled")+" => Time: "+ah.time+"ms");console.info(ak)}}else{ai.onerror({type:"error"});if(ah.options.error){console.error("JSONP "+al+" "+ak.status)
}}})}else{document.body.appendChild(ai)}}function aa(ai,aj){var ah=X(aj);if(!ah){document.body.removeChild(ai)}}function M(ak,al,ah,ai){var aj=d({},Z,ai);Q(J(ak)?(ai=al,ak):[{path:ak,method:al,response:ah}],aj,aj.baseURL,true);return M}function r(ah){d(Z,ah)}function L(ah){ah.setup({getXMLHttpRequest:function(ai){return new P(ai)},sendJSONP:g,sendEndJSONP:aa});if(Z.log){console.info("[XEAjax] Ready. Detected XEAjaxMock v"+ab)}}function ae(ah){return function(ak,ai,aj){return M(ak,ah,ai,aj)}}function F(aj,ah,ai){return M(aj,"GET",ah,d({jsonp:"callback"},ai))}var m=y;var A=M;var E=ae("GET");var V=ae("POST");var k=ae("PUT");var u=ae("DELETE");var H=ae("PATCH");var R=ae("HEAD");var ab="1.5.7";function ad(ah){return d(M,ah)}ad({setup:r,install:L,template:m,Mock:A,JSONP:F,GET:E,POST:V,PUT:k,DELETE:u,PATCH:H,HEAD:R,version:ab});M.mixin=ad;return M}));