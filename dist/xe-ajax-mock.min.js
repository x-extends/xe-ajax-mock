/**
 * xe-ajax-mock.js v1.6.11
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 * @preserve
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.XEAjaxMock=e()}(this,function(){"use strict";function t(t){return"[object Date]"===A.call(t)}function e(t){return"object"==typeof t}function n(t){return"function"==typeof t}function r(t){return"string"==typeof t}function o(t,e){return t>=e?t:(t=t||0)+Math.round(Math.random()*((e||9)-t))}function s(e,n){if(e){if(t(e))return e;if(!isNaN(e))return new Date(e);if(r(e)){n=n||"yyyy-MM-dd HH:mm:ss.SSS";var o=[];return a(P,function(t){for(var r,s,i=0,a=t.rules,u=a.length;i<u;i++){if(r=a[i],(s=n.indexOf(r[0]))>-1){o.push(parseFloat(e.substring(s,s+r[1])||0)+(t.offset||0));break}i===u-1&&o.push(0)}}),new Date(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}}return"Invalid Date"}function i(e,n){if(e=s(e),t(e)){var r=["日","一","二","三","四","五","六"],o={"q+":Math.floor((e.getMonth()+3)/3),"M+":e.getMonth()+1,"E+":e.getDay(),"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),S:e.getMilliseconds()},i=String(n||"yyyy-MM-dd HH:mm:ss").replace(/(y+)/,function(t){return(""+e.getFullYear()).substr(4-t.length)});for(var a in o)if(o.hasOwnProperty(a)){var u=""+o[a];i=i.replace(new RegExp("("+a+")"),function(t){return"q+"===a||"E+"===a?r[u]:1===t.length?u:("00"+u).substr(u.length)})}return i}return e}function a(t,e,n){if(t.forEach)return t.forEach(e,n);for(var r=0,o=t.length||0;r<o;r++)e.call(n||global,t[r],r,t)}function u(t,e,n){for(var r in t)t.hasOwnProperty(r)&&e.call(n||this,t[r],r,t)}function c(t){var e=[];if(t){if(Object.keys)return Object.keys(t);u(t,function(t,n){e.push(n)})}return e}function h(t){for(var e=[],n=function(t){if(Object.values)return t?Object.values(t):[];var e=[];return a(c(t),function(n){e.push(t[n])}),e}(t),r=n.length-1;r>=0;r--){var s=r>0?o(0,r):0;e.push(n[s]),n.splice(s,1)}return e}function f(t,e){var n=h(t);return 1===arguments.length?n[0]:(e<n.length&&(n.length=e||0),n)}function p(){return location.origin||location.protocol+"//"+location.host}function l(t){var e=String(t).match(/(\d+)-(\d+)/);return e&&3===e.length?o(parseInt(e[1]),parseInt(e[2])):isNaN(t)?0:Number(t)}function d(t,e){var n=t.replace(/[\r\n\t]/g," ").replace(/{{\s*(.*?)\s*}}/g,function(t,e){return function(t){return D.contEnd+t+D.contStart}(D.cStart+e+D.cEnd)});try{return n="var "+D.tStart+";with(opts){"+D.contStart+n+D.contEnd+"};"+D.tEnd,new Function("opts",n.replace(D.simplifyRegExp,""))(e)}catch(t){console.error(t)}return t}function g(t,n){var r=null;if(r=m(t,new v({},n)),e(r)){var o=c(r);1===o.length&&"!return"===o[0]&&(r=r[o[0]])}return r}function m(t,n){if(t){if(C(t))return y(t,n);if(e(t))return function(t,e){var n={};return u(t,function(t,r){var o=r.match(U),s=null;if(o&&4===o.length){r=o[1];var i="random"===o[2].toLowerCase();if("array"===o[2].toLowerCase()||i){var a=l(d(o[3],e));if(C(t))t.length>a?(s=y(i?f(t,a):t.slice(0,a),e),i&&1===s.length&&(s=s[0])):s=y(t,e);else{s=[];for(var u=0;u<a;u++){var c=new v({$parent:e,$obj:s,$value:null,$size:a,$index:u},e.$fns);s.push(m(t,c))}}}}else s=m(t,e),(o=r.match(/(.+)\|(number|boolean)$/))&&3===o.length&&(r=o[1],"number"===o[2].toLowerCase()?s=parseFloat(s):"boolean"===o[2].toLowerCase()&&(s="0"!==s&&Boolean(s)));n[r]=s}),n}(t,n);if(r(t))return d(t,n)}return t}function y(t,e){var n=[];return a(t,function(r,o){var s=new v({$parent:e,$obj:t,$value:r,$size:t.length,$index:o},e.$fns);n.push(m(r,s))}),n}function v(t,e){this.$fns=e,q(this,e,t)}function b(t){return q(v.prototype,t)}function _(t,e){var n=e._request,r=O(n);return r?(r.time=l(r.options.timeout),r.getMockResponse(n).then(function(t){return r.outMockLog(n,t),t})):fetch(t,e)}function E(){this._mock=null,this._xhr=null}function w(t){t.script.parentNode===document.body&&document.body.removeChild(t.script);try{delete V[t.jsonpCallback]}catch(e){V[t.jsonpCallback]=void 0}}function S(t,e,n){w(t),n(e)}function x(t,e){w(t),e(new TypeError("JSONP request failed"))}function T(t,e){return new Promise(function(n,r){var o=O(e);if(V[e.jsonpCallback]=function(t){S(e,{status:200,body:t},n)},o)return o.time=l(o.options.timeout),o.getMockResponse(o,e).then(function(t){t.status<200||t.status>=300?x(e,r):S(e,t.body,n),o.outMockLog(e,t)});var s=e.getUrl();t.type="text/javascript",t.src=s+(-1===s.indexOf("?")?"?":"&")+e.jsonp+"="+e.jsonpCallback,t.onerror=function(){x(e,r)},e.timeout&&setTimeout(function(){x(e,r)},e.timeout),document.body.appendChild(t)})}function M(t,e){try{return JSON.parse(X[e])}catch(t){}return X[e]}function j(t,e,n,r){n&&!0===t.options.template&&(n=I(n,{$pathVariable:t.pathVariable,$params:e.params||{},$body:e.body||{}})),n&&void 0!==n.body&&void 0!==n.status?(n.headers=q({},t.options.headers,n.headers),q(this,n)):(this.status=r,this.body=n,this.headers=q({},t.options.headers))}function k(t,e,n,r){var o=q({},G,r);return $(C(t)?(r=e,t):[{path:t,method:e,response:n}],o,o.baseURL,!0),k}function $(t,e,n,r){C(t)&&a(t,function(t){t.path&&(r&&0===t.path.indexOf("/")?t.path=p()+t.path:r&&/\w+:\/{2}.*/.test(t.path)?t.path=t.path:t.path=n.replace(/\/$/,"")+"/"+t.path.replace(/^\//,""),void 0!==t.response&&(t.method=String(t.method||"GET"),F.push(new R(t.path,t.method,t.response,e))),$(t.children,e,t.path))})}function O(t){var e=(t.getUrl()||"").split(/\?|#/)[0];return F.find(function(n){if((!n.jsonp||n.jsonp===t.jsonp)&&t.method.toLowerCase()===n.method.toLowerCase()){var r=!1,o=[],s=e.match(new RegExp(n.path.replace(/{[^{}]+}/g,function(t){return o.push(t.substring(1,t.length-1)),"([^/]+)"}).replace(/\/[*]{2}/g,"/.+").replace(/\/[*]{1}/g,"/[^/]+")+"/?$"));return n.pathVariable={},r=s&&s.length===o.length+1,n.options.pathVariable&&r&&o.length&&a(o,function(t,e){n.pathVariable[t]=function(t,e){if(t&&"auto"===e.options.pathVariable){if(!isNaN(t))return parseFloat(t);if("true"===t)return!0;if("false"===t)return!1}return t}(s[e+1],n)}),r}})}function R(t,e,n,r){t&&e?(this.path=t,this.method=e,this.time=0,this.response=n,this.options=r,this.asyncTimeout=null):this.options.error&&console.error("path and method cannot be empty")}function H(t){return function(e,n,r){return J(e,t,n,r)}}function L(t){return q(k,t)}var A=Object.prototype.toString,C=Array.isArray||function(t){return"[object Array]"===A.call(t)},P=[{rules:[["yyyy",4],["yyy",3],["yy",2]]},{rules:[["MM",2],["M",1]],offset:-1},{rules:[["dd",2],["d",1]]},{rules:[["HH",2],["H",1]]},{rules:[["mm",2],["m",1]]},{rules:[["ss",2],["s",1]]},{rules:[["SSS",3],["SS",2],["S",1]]}],q=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])}return t},N={random:{num:o,time:function(t,e,n){return t?e?o(s(t,n).getTime(),s(e,n).getTime()):s(t,n).getTime():t},date:function(t,e,n){return t?i(e?N.random.time(t,e):t,n):t},repeat:function(t,e,n){if(e=e||1,n=n||e,r(t)&&(t=t.split("")),t.length<n){for(var s=t;s.length<n;)s=s.concat(t);s.length=n,t=s}return f(t,o(e,n)).join("")}}},D={tStart:"__restArr=[]",tEnd:"return __restArr.join('');",contStart:"__restArr.push('",contEnd:"');\n",contTrimEnd:"'.trim());\n",cStart:"__restArr.push(",cEnd:");\n",simplifyRegExp:/__restArr\.push\('\s*'\);/g},U=/(.+)\|(array|random)\((.+)\)$/;g.mixin=b,b(N),q(E.prototype,{timeout:0,status:0,readyState:0,ontimeout:null,onreadystatechange:null,withCredentials:!1,response:"",responseText:"",open:function(t,e){this._mock=O(this._request),this._mock?(this.readyState=1,n(this.onreadystatechange)&&this.onreadystatechange()):(this._xhr=new XMLHttpRequest,this._xhr.open(t,e,!0))},send:function(t){var e=this,n=this._mock,r=this._request;if(n)return n.time=l(n.options.timeout),n.getMockResponse(r).then(function(t){e.readyState=4,e._updateResponse(r,t),e._triggerEvent("readystatechange"),e._triggerEvent("load"),n.outMockLog(r,t)});var o=this._xhr;o.withCredentials=this.withCredentials,o.responseType=this.responseType||"",o.onload=function(){e._triggerEvent("load")},o.onerror=function(){e._triggerEvent("error")},o.ontimeout=function(){e._triggerEvent("timeout")},o.onabort=function(){e._triggerEvent("abort")},o.onreadystatechange=function(){e.readyState=o.readyState,e._updateResponse(r,{status:o.status,body:o.response}),e._triggerEvent("readystatechange")},o.send(t)},abort:function(){var t=this,e=this._mock,n=this._request;setTimeout(function(){if(e){if(0!==t.readyState){clearTimeout(e.asyncTimeout);var r={status:0,body:""};t._updateResponse(t._request,r),t.readyState=4,t._triggerEvent("timeout"),t.readyState=0,e.outMockLog(n,r)}}else t._xhr&&t._xhr.abort()})},setRequestHeader:function(t,e){this._xhr&&this._xhr.setRequestHeader(t,e)},getAllResponseHeaders:function(){if(this._xhr)return this._xhr.getAllResponseHeaders();var t="",e=this._headers;if(e)for(var n in e)e.hasOwnProperty(n)&&(t+=n+": "+e[n]+"\n");return t},_triggerEvent:function(t){n(this["on"+t])&&this["on"+t]({type:t})},_updateResponse:function(t,e){var n=e.body||"";this.status=e.status,this._headers=e.headers,this._mock&&(r(n)||(n=JSON.stringify(n))),"blob"===this.responseType?(this.response=n instanceof Blob?n:new Blob([n]),this.responseText=""):this.responseText=this.response=n}});var V="undefined"==typeof window?this:window,X={};q(j.prototype,{require:function(t){return new Promise(function(e,n){if(0===t.indexOf("/")?t=p()+t:/\w+:\/{2}.*/.test(t)||(t=G.baseURL.replace(/\/$/,"")+"/"+t),X[t])e(M(0,t));else{var r=new XMLHttpRequest;r.open("GET",t,!0),r.onreadystatechange=function(){4===r.readyState&&(r.status<200&&r.status>=300&&G.error&&console.error("This relative module was not found: "+t),X[t]=r.responseText,e(M(0,t)))},r.send()}})}});var F=[],G={baseURL:function(){var t=location.pathname,e=function(t,e){if(n(t.lastIndexOf))return t.lastIndexOf(e);for(var r=t.length-1;r>=0;r--)if(e===t[r])return r;return-1}(t,"/")+1;return p()+(e===t.length?t:t.substring(0,e))}(),template:!1,pathVariable:!0,timeout:"20-400",headers:null,error:!0,log:!1};Object.assign(R.prototype,{getMockResponse:function(t){var e=this;return new Promise(function(r,o){e.asyncTimeout=setTimeout(function(){if(!t.$complete)return n(e.response)?Promise.resolve(e.response(t,new j(e,t,null,200),e)).then(function(n){r(new j(e,t,n,200))}):Promise.resolve(e.response).then(function(n){r(new j(e,t,n,200))}).catch(function(n){o(new j(e,t,n,500))})},e.time)})},outMockLog:function(t,e){var n=t.getUrl();this.options.error&&(e.status<200||e.status>=300)&&console.error(t.method+" "+n+" "+e.status),this.options.log&&(console.info("[XEAjaxMock] URL: "+n+"\nMethod: "+t.method+" => Status: "+(e?e.status:"canceled")+" => Time: "+this.time+"ms"),console.info(e))}});var I=g,J=k,B=H("GET"),z=H("POST"),Y=H("PUT"),K=H("DELETE"),Q=H("PATCH"),W=H("HEAD"),Z={template:g,Mock:J,JSONP:function(t,e,n){return J(t,"GET",e,q({jsonp:"callback"},n))},HEAD:W,GET:B,POST:z,PUT:Y,DELETE:K,PATCH:Q};return q(k,{mixin:L,setup:function(t){q(G,t)},install:function(t){t.setup({$fetch:_,$XMLHttpRequest:E,$jsonp:T})},version:"1.6.11",$name:"XEAjaxMock"}),L(Z),k});